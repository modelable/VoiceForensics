extends ./layout.pug

block content
    div(class='container-fluid mt-5')
        div(class="row")
            div(class="col-md-9 m-auto")
                h2(class="mt-2 text-center") 음성 위변조 탐지 보고서

                div(class="card mt-4")
                    div(class="card-body")
                        div(class="row my-4")
                            div(class="col-12")
                                p(class="strong-text text-center") 모델 예측 결과: #{result.live_data_prediction} (실시간 음성), #{result.record_data_prediction} (녹취록)
                                p(class="strong-text text-center") 유사도: #{result.MAE_similarity}%

                                // 판정 기준표
                                div(class="row my-4")
                                    div(class="col-12")
                                        table.table.table-bordered
                                            thead
                                                tr
                                                    th 유사도
                                                    th 판정 결과
                                            tbody
                                                tr
                                                    td 95% 이상
                                                    td 동일 인물일 가능성이 매우 높습니다.
                                                tr
                                                    td 75% ~ 95%
                                                    td 변조 가능성이 존재하며 시각화 자료를 통해 세밀한 분석이 필요합니다.
                                                tr
                                                    td 75% 미만
                                                    td 다른 인물일 가능성이 매우 높습니다.

                                p(class="text-center") 검사 날짜: #{result.timestamp.toLocaleDateString()}
                    hr

                    div(class="row my-4")
                        div(class="col-12")
                            img(src=`clustering_label_${result.files_control_id}.png`, alt="Clustering graph", class="image-small mx-auto d-block")
                            p(class="strong-text text-center") AI모델 학습 전 실시간/녹취록 음성에서 추출한 MFCC 계수들을 2차원 좌표평면에 나타내고 분포에 따라 레이블을 부여한 결과입니다.
                    hr

                    div(class="row my-4")
                        div(class="col-12")
                            img(src=`train_acc_loss_${result.files_control_id}.png`, alt="Train accuracy and loss graph", class="img-fluid")
                            p(class="strong-text text-center") 훈련 횟수에 따른 모델의 오차율과 훈련 정확도를 보여줍니다.
                    hr
                    
                    div(class="row my-4")
                        div(class="col-12")
                            img(src=`fft_spectrum_${result.files_control_id}.png`, alt="MFCC spectrum graph", class="img-fluid")
                            p(class="strong-text text-center") 실시간 음성과 녹취록의 주파수 대역별 데시벨을 비교한 그래프입니다. 
                    hr
                    
                    div(class="row my-4")
                        div(class="col-12")
                            img(src=`mfcc_spectrum_graph_${result.files_control_id}.png`, alt="Spectrogram of recorded and live speech", class="img-fluid")
                            p(class="strong-text text-center") 각 프레임에 따른 MFCC 계수값들의 세기를 색깔로 표현한 스펙트럼입니다.
                    hr
                    
                    div(class="row my-4")
                        div(class="col-12")
                            img(src=`mfcc_bar_graph_${result.files_control_id}.png`, alt="MFCC coefficients average values graph", class="img-fluid")
                            p(class="strong-text text-center") 실시간 음성과 녹취록의 MFCC 계수 별 평균값을 비교한 막대 그래프입니다.

                    //MFCC 평균 비교표
                    div(class="row my-4")
                        div(class="col-12")
                            table(class="table table-bordered")
                                thead
                                    tr
                                        th MFCC 계수
                                        each num in [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]
                                            th= num
                                tbody
                                    tr
                                        td 녹취록 
                                        each num in [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]
                                            - let value = recordAvg && recordAvg[`MFCC${num}`] ? recordAvg[`MFCC${num}`].toFixed(2) : ''
                                            td= value
                                    tr
                                        td 실시간
                                        each num in [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]
                                            - let value = controlAvg && controlAvg[`MFCC${num}`] ? controlAvg[`MFCC${num}`].toFixed(2) : ''
                                            td= value
        br
        form(action="/dashboard" method="GET")
            button(type='submit' class="btn btn-outline-success") Back to the Dashboard
